<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Chatbot UI</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Chatbot CSS -->
    <link href="chatbot.css" rel="stylesheet">
</head>

<body>
    <div class="container-fluid">
        <h1 class="text-center my-4">Test Giao Diá»‡n Chatbot</h1>
        <p class="text-center text-muted">Nháº¥n vÃ o biá»ƒu tÆ°á»£ng chatbot á»Ÿ gÃ³c dÆ°á»›i pháº£i Ä‘á»ƒ báº¯t Ä‘áº§u trÃ² chuyá»‡n</p>

        <!-- Sample content -->
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ChÃ o má»«ng Ä‘áº¿n vá»›i cá»­a hÃ ng!</h5>
                        <p class="card-text">ÄÃ¢y lÃ  trang demo Ä‘á»ƒ test giao diá»‡n chatbot AI Shopping Assistant.</p>
                        <p class="card-text">Chatbot há»— trá»£:</p>
                        <ul>
                            <li>ğŸ” TÃ¬m kiáº¿m sáº£n pháº©m</li>
                            <li>ğŸ’° So sÃ¡nh giÃ¡ cáº£</li>
                            <li>ğŸ“¦ ThÃ´ng tin váº­n chuyá»ƒn</li>
                            <li>ğŸ’³ HÆ°á»›ng dáº«n thanh toÃ¡n</li>
                            <li>ğŸ”„ ChÃ­nh sÃ¡ch Ä‘á»•i tráº£</li>
                        </ul>
                        <hr>
                        <h6>Thá»­ cÃ¡c cÃ¢u lá»‡nh:</h6>
                        <ul>
                            <li>"TÃ¬m laptop gaming 20 triá»‡u"</li>
                            <li>"Sáº£n pháº©m ná»•i báº­t"</li>
                            <li>"ThÃ´ng tin giao hÃ ng"</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chatbot Widget -->
    <!-- Chatbot Icon -->
    <div class="chatbot-icon" id="chatbotIcon">
        <i class="fas fa-robot"></i>
    </div>

    <!-- Chatbot Container -->
    <div class="chatbot-container" id="chatbotContainer">
        <div class="chatbot-header">
            <div class="chatbot-avatar">
                <i class="fas fa-robot"></i>
            </div>
            <div class="chatbot-info">
                <h6>AI Shopping Assistant</h6>
                <span>Trá»£ lÃ½ mua sáº¯m thÃ´ng minh</span>
            </div>
            <button class="btn-close-chatbot" id="closeChatbot">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="chatbot-messages" id="chatbotMessages">
            <div class="bot-message">
                <div class="message-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-content">
                    ğŸ‘‹ Xin chÃ o! TÃ´i lÃ  trá»£ lÃ½ mua sáº¯m thÃ´ng minh cá»§a cá»­a hÃ ng.
                    TÃ´i cÃ³ thá»ƒ giÃºp báº¡n tÃ¬m sáº£n pháº©m, tÆ° váº¥n mua sáº¯m vÃ  giáº£i Ä‘Ã¡p tháº¯c máº¯c.
                    Báº¡n cáº§n tÃ´i há»— trá»£ gÃ¬ hÃ´m nay? ğŸ˜Š
                </div>
            </div>
        </div>

        <div class="chatbot-input-container">
            <input type="text" class="chatbot-input" id="chatbotInput" placeholder="Nháº­p cÃ¢u há»i cá»§a báº¡n...">
            <button class="btn-send-message" id="sendMessage">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Chatbot JS -->
    <script>
        // Mock data for testing
        const mockResponses = {
            "tÃ¬m laptop gaming 20 triá»‡u": "ğŸ” Báº¡n Ä‘ang tÃ¬m kiáº¿m laptop gaming vá»›i giÃ¡ khoáº£ng 20 triá»‡u?\n\nTÃ´i cÃ³ má»™t sá»‘ gá»£i Ã½ phÃ¹ há»£p vá»›i nhu cáº§u cá»§a báº¡n:\n\nâ€¢ â€¢ ASUS ROG Strix G15â€¢ â€¢ (19.5 triá»‡u VNÄ)\n- MÃ n hÃ¬nh: 15,6 inch, Full HD\n- Chip: Intel Core i5, 10th Gen\n- RAM: 8GB DDR4\n- Card Ä‘á»“ há»a: NVIDIA GeForce GTX 1650\n- á»” cá»©ng: 512GB SSD\n\nâ€¢ â€¢ MSI Gaming Laptopâ€¢ â€¢ (18.9 triá»‡u VNÄ)\n- MÃ n hÃ¬nh: 15,6 inch, Full HD\n- Chip: Intel Core i5, 10th Gen\n- RAM: 8GB DDR4\n- Card Ä‘á»“ há»a: NVIDIA GeForce GTX 1650\n- á»” cá»©ng: 512GB SSD\n\nğŸ’¡ **LÆ°u Ã½:** Nháº¥n vÃ o sáº£n pháº©m Ä‘á»ƒ xem chi tiáº¿t vÃ  thÃªm vÃ o giá» hÃ ng! ğŸ›’\n\nğŸ“ **LiÃªn há»‡ tÆ° váº¥n:** 1900-1234 | ğŸ“§ support@shop.com",
            "sáº£n pháº©m ná»•i báº­t": "â­ **Sáº£n pháº©m ná»•i báº­t hÃ´m nay:**\n\nğŸ”¥ iPhone 15 Pro Max - 29.9 triá»‡u VNÄ\nğŸ”¥ Samsung Galaxy S24 Ultra - 28.5 triá»‡u VNÄ\nğŸ”¥ ASUS ROG Strix G15 - 19.5 triá»‡u VNÄ\nğŸ”¥ MacBook Air M3 - 27.9 triá»‡u VNÄ\nğŸ”¥ Dell XPS 13 - 23.9 triá»‡u VNÄ\n\nâœ¨ Nhá»¯ng sáº£n pháº©m nÃ y Ä‘ang Ä‘Æ°á»£c khÃ¡ch hÃ ng yÃªu thÃ­ch nháº¥t!",
            "thÃ´ng tin giao hÃ ng": "ğŸšš **ThÃ´ng tin váº­n chuyá»ƒn:**\n\nâ€¢ Miá»…n phÃ­ ship: ÄÆ¡n hÃ ng tá»« 500.000 VNÄ trá»Ÿ lÃªn\nâ€¢ Giao hÃ ng tiÃªu chuáº©n: 3-5 ngÃ y lÃ m viá»‡c\nâ€¢ Giao hÃ ng nhanh: CÃ³ phá»¥ thu (1-2 ngÃ y)\n\nğŸ“ Báº¡n muá»‘n kiá»ƒm tra thá»i gian giao hÃ ng Ä‘áº¿n Ä‘á»‹a chá»‰ cá»¥ thá»ƒ khÃ´ng?",
            "default": "ğŸ¤” TÃ´i chÆ°a hiá»ƒu rÃµ yÃªu cáº§u cá»§a báº¡n. Báº¡n cÃ³ thá»ƒ nÃ³i rÃµ hÆ¡n khÃ´ng?\n\nğŸ’¡ **Gá»£i Ã½:** HÃ£y thá»­ há»i vá»:\nâ€¢ TÃ¬m sáº£n pháº©m: \"TÃ¬m laptop gaming\"\nâ€¢ Sáº£n pháº©m ná»•i báº­t: \"Sáº£n pháº©m ná»•i báº­t\"\nâ€¢ ChÃ­nh sÃ¡ch: \"ThÃ´ng tin giao hÃ ng\""
        };

        // Get elements
        const chatbotIcon = document.getElementById('chatbotIcon');
        const chatbotContainer = document.getElementById('chatbotContainer');
        const closeChatbot = document.getElementById('closeChatbot');
        const chatbotInput = document.getElementById('chatbotInput');
        const sendMessage = document.getElementById('sendMessage');
        const chatbotMessages = document.getElementById('chatbotMessages');

        // Show/hide chatbot
        chatbotIcon.addEventListener('click', function () {
            chatbotContainer.style.display = 'flex';
            chatbotIcon.style.display = 'none';
            chatbotInput.focus();
        });

        closeChatbot.addEventListener('click', function () {
            chatbotContainer.style.display = 'none';
            chatbotIcon.style.display = 'flex';
        });

        // Send message
        function sendUserMessage() {
            const message = chatbotInput.value.trim();
            if (message) {
                addUserMessage(message);
                chatbotInput.value = '';

                // Show typing indicator
                showTypingIndicator();

                // Simulate bot response after delay
                setTimeout(() => {
                    hideTypingIndicator();
                    const botResponse = getBotResponse(message.toLowerCase());
                    addBotMessage(botResponse);
                }, 1500);
            }
        }

        sendMessage.addEventListener('click', sendUserMessage);

        chatbotInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                sendUserMessage();
            }
        });

        // Add user message
        function addUserMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'user-message';
            messageDiv.innerHTML = `
                <div class="message-content">${message}</div>
                <div class="message-avatar">
                    <i class="fas fa-user"></i>
                </div>
            `;
            chatbotMessages.appendChild(messageDiv);
            scrollToBottom();
        }

        // Add bot message
        function addBotMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'bot-message';

            // Format message for HTML display
            const formattedMessage = formatBotMessage(message);

            messageDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-content">${formattedMessage}</div>
            `;
            chatbotMessages.appendChild(messageDiv);
            scrollToBottom();
        }

        // Format bot message
        function formatBotMessage(message) {
            return message
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\n/g, '<br>')
                .replace(/â€¢ â€¢/g, '<span class="product-highlight">â€¢</span>')
                .replace(/ğŸ”|ğŸ‘‹|â­|ğŸšš|ğŸ’¡|ğŸ”¥|âœ¨|ğŸ¤”|ğŸ“|ğŸ“§|ğŸ’³|ğŸ›’|ğŸ“|ğŸ”„|ğŸ“¦|ğŸ’°/g, '<span class="emoji">$&</span>');
        }

        // Get bot response
        function getBotResponse(message) {
            for (const key in mockResponses) {
                if (message.includes(key) && key !== 'default') {
                    return mockResponses[key];
                }
            }
            return mockResponses.default;
        }

        // Show typing indicator
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'bot-message typing-indicator';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-content">
                    <div class="typing-dots">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                </div>
            `;
            chatbotMessages.appendChild(typingDiv);
            scrollToBottom();
        }

        // Hide typing indicator
        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // Scroll to bottom
        function scrollToBottom() {
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }

        // Auto focus input when container is shown
        const observer = new MutationObserver(function (mutations) {
            mutations.forEach(function (mutation) {
                if (mutation.type === 'attributes' &&
                    mutation.attributeName === 'style' &&
                    chatbotContainer.style.display === 'flex') {
                    setTimeout(() => chatbotInput.focus(), 100);
                }
            });
        });
        observer.observe(chatbotContainer, { attributes: true });
    </script>
</body>

</html>