# Application Name
spring.application.name=CommercePlatformFull

# Server Configuration
server.port=8080
server.servlet.context-path=/

server.servlet.session.timeout=30m

spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=ECommercePlatform;encrypt=false;trustServerCertificate=true;characterEncoding=UTF-8;useUnicode=true;sendStringParametersAsUnicode=true
spring.datasource.username=sa
spring.datasource.password=123456
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# JPA/Hibernate Configuration - Optimized for performance
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect

# UTF-8 Configuration for Hibernate
spring.jpa.properties.hibernate.connection.characterEncoding=UTF-8
spring.jpa.properties.hibernate.connection.useUnicode=true
spring.jpa.properties.hibernate.connection.charSet=UTF-8

# File Upload Configuration - Database storage only
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=100MB

# Thymeleaf Configuration
spring.thymeleaf.cache=false
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8

# HTTP Encoding Configuration
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# Logging Configuration - Optimized for performance
logging.level.com.mypkga.commerceplatformfull=WARN
logging.level.org.springframework.security=ERROR
logging.level.org.hibernate.SQL=ERROR
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=ERROR
logging.level.org.springframework.web=WARN
logging.level.org.springframework.mail=WARN
logging.level.jakarta.mail=WARN
logging.level.org.springframework.boot.autoconfigure=ERROR
logging.level.org.springframework.orm.jpa=ERROR
logging.level.org.springframework.transaction=ERROR

# Security Logging
logging.level.com.mypkga.commerceplatformfull.security=INFO
logging.level.com.mypkga.commerceplatformfull.monitoring=INFO


logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
#logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# VNPay Configuration (Sandbox/Test Mode)
vnpay.tmn-code=QYQ3HPWW
vnpay.hash-secret=ZIQU8IKE4YBRYZFX8QTLXPWVNK1S56VW
vnpay.api-url=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html
vnpay.return-url=http://localhost:8080/payment/vnpay/callback

# OpenAI API Configuration (for AI features)
openai.api-key=colamthimoicoan
openai.model=gpt-3.5-turbo
openai.api-url=https://api.openai.com/v1/chat/completions
# Security Configuration

# Session Security
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.same-site=lax
server.servlet.session.tracking-modes=cookie

# Performance Configuration - Optimized
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.generate_statistics=false

# Connection Pool Configuration - Optimized for performance
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=900000

# Cache Configuration
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterAccess=30m

# Image & Video Upload Configuration - Database storage
app.image.max-size=10MB
app.image.allowed-types=image/jpeg,image/png,image/gif,image/webp

# Video Upload Configuration - Database storage  
app.video.max-size=100MB
app.video.allowed-types=video/mp4,video/avi,video/mov,video/wmv,video/webm

# File Storage Configuration
app.file-storage.type=cloudinary

# Cloudinary Configuration (for video/image storage)
cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME:dcbd3ct16}
cloudinary.api-key=${CLOUDINARY_API_KEY}
cloudinary.api-secret=${CLOUDINARY_API_SECRET}

# Rate Limiting Configuration
app.rate-limit.requests-per-minute=60
app.rate-limit.login-attempts-per-minute=5

# Monitoring Configuration
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.metrics.export.simple.enabled=true
# SMS Configuration - Disabled
app.sms.enabled=false

# OTP Configuration
app.otp.expiry-minutes=1
app.otp.max-attempts=5
app.otp.rate-limit-minutes=1
app.otp.max-requests-per-period=1
app.otp.block-duration-minutes=5
# Email Configuration - Real email sending
app.email.enabled=true
app.email.mock-mode=false
app.email.from=ytruongtieuhoc@gmail.com
app.email.from-name=E-Commerce Platform

# Spring Mail Configuration (when using real email) - Optimized for speed
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=ytruongtieuhoc@gmail.com
spring.mail.password=giru awvr xkyg gydq
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# Email Performance Optimization
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=10000
spring.mail.properties.mail.smtp.writetimeout=10000
spring.mail.properties.mail.smtp.ssl.checkserveridentity=false
spring.mail.properties.mail.smtp.ssl.enable=false
spring.mail.properties.mail.debug=false

# Password Reset Configuration
app.password-reset.expiry-minutes=30

# Shop Configuration for Return Processing
app.shop.name=E-Commerce Platform
app.shop.address=123 Main Street, District 1, Ho Chi Minh City, Vietnam
app.shop.phone=+84-123-456-789
app.shop.email=returns@ecommerce-platform.com

# QR Code Configuration
app.qr-code.size=300
app.qr-code.error-correction=M
app.qr-code.margin=1
app.qr-code.format=PNG

# Return Code Configuration
app.return-code.prefix=RET
app.return-code.expiry-hours=48
app.return-code.secure-url-expiry-minutes=60

# System Startup Validation Configuration - Consolidated
app.startup.validation.enabled=false
app.startup.validation.fail-on-error=false
app.startup.validation.log-configuration-report=false
app.startup.validation.enable-periodic-health-checks=false
app.startup.validation.health-check-interval-minutes=60

# GHN (Giao Hang Nhanh) Configuration
# NOTE: Without valid tokens, the system will use mock data for shipping calculations
ghn.api-url=https://dev-online-gateway.ghn.vn/shiip/public-api
ghn.token=${GHN_TOKEN:78be1310-ffe5-11f0-a3d6-dac90fb956}
ghn.shop-id=${GHN_SHOP_ID:199293}

# GHN Warehouse Configuration (Shop's warehouse address)
ghn.warehouse-district-id=${GHN_WAREHOUSE_DISTRICT_ID:3776}
ghn.warehouse-ward-code=${GHN_WAREHOUSE_WARD_CODE:510113}
ghn.warehouse-address=${GHN_WAREHOUSE_ADDRESS:123 Main Street, District 1, Ho Chi Minh City}
ghn.warehouse-name=${GHN_WAREHOUSE_NAME:E-Commerce Platform Warehouse}
ghn.warehouse-phone=${GHN_WAREHOUSE_PHONE:+84-123-456-789}

# GHN Service Configuration
ghn.default-service-type-id=2
ghn.default-required-note=KHONGCHOXEMHANG
ghn.default-payment-type-id=2

# GHN Retry Configuration
ghn.max-retries=3
ghn.retry-delay-ms=1000

# GHN Webhook Configuration
ghn.webhook-secret=${GHN_WEBHOOK_SECRET}
ghn.webhook-enabled=true
